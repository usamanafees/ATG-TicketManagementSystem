    {% extends 'itrak/base.html' %}

    {% block body_block %}
        {% load static %}
        {% load tz %} {# it will Load the Django TimeZone Library#}
{#        {% get_current_timezone as TIME_ZONE %} {# it will Load the Current Time Zone List#}

				<section role="main" class="content-body">
					<header class="page-header">
                       <h2><i class="fa fa-ticket" aria-hidden="true"></i> Ticket </h2>

						<div class="right-wrapper pull-right">
							<ol class="breadcrumbs">
								<li>
									<a href="{% url 'home' %}">
										<i class="fa fa-home"></i>
									</a>
								</li>
								<li><span>Ticket</span></li>
								<li><span>Search Tickets</span></li>
							</ol>

							<a class="sidebar-right-toggle" data-open="sidebar-right"><i class="fa fa-chevron-left"></i></a>
						</div>
					</header>

					<!-- start: page -->
                         <div class="row">
                            <div class="col-md-12">
                                {% for message in messages %}
                                    <div class="alert {% if 'success' in message.tags %} alert-success {% else %} alert-danger{% endif %} alert-dismissible" role="alert">
                                          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        {{ message }}
                                    </div>
                                {% endfor %}
                                <form id="summary-form" action="{% url 'ticketSearchResults' %}" method="post" class="form-horizontal">
                                    {% csrf_token %}
                                    <input type="hidden" name="savedSearchId" id="savedSearchId" value="{{ report.saved_search_id }}">
                                    <section class="panel">
                                        <header class="panel-heading">
{#                                            <div class="panel-actions">#}
{#                                                <a href="#" class="fa fa-caret-down"></a>#}
{#                                                <a href="#" class="fa fa-times"></a>#}
{#                                            </div>#}

                                            <h2 class="panel-title">Search Tickets</h2>
                                        </header>
                                        <footer class="panel-footer">
                                            <div class="row">
                                                <div class="col-sm-9">
                                                    <button class="btn btn-primary saveButton">Search</button>
                                                    <button type="reset" class="btn btn-default resetBtn">Reset</button>
                                                    <a class="btn btn-primary" href="{% url 'searchTicket' %}">New Search</a>
                                                </div>
                                            </div>
                                        </footer>
                                        <div class="panel-body">
                                            <div class="validation-message">
                                                <ul></ul>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for=""></label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-12 col-sm-12">
                                                    	<h4 class="text-primary text-bold"> Search Criteria</h4>
                                                	</div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Ticket Status</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-3 col-sm-3">
                                                        <select name="ticket_status" id="ticket_status" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Status", "allowClear": true }'>
                                                            <option value="" > </option>
                                                            <option value="0" {% if report.ticket_status == 0 %}selected{% endif %} >Opened</option>
                                                            <option value="1" {% if report.ticket_status == 1 %}selected{% endif %}>Closed</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-3 col-sm-4">
                                                        <select name="ticket_sub_status" id="ticket_sub_status" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Sub Status", "allowClear": true }'>
                                                            <option value="" > </option>
                                                            {% if substatus %}
                                                                {% for sstatus in substatus %}
                                                                    <option value="{{ sstatus.sub_status_id }}" {% if report.ticket_sub_status_id == sstatus.sub_status_id %}selected{% endif %}>{{ sstatus.sub_status_text }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Priority: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="priority" id="priority" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Priority", "allowClear": true }'>
                                                            <option value="" > </option>
                                                            {% if priorities %}
                                                                {% for priority in priorities %}
                                                                    <option value="{{ priority.priority_id }}" {% if report.priority_id == priority.priority_id %}selected{% endif %}>{{ priority.priority_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Ticket Type: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="ticket_type" id="ticket_type_parent" data-plugin-selectTwo class="form-control populate ticket_type placeholder" data-plugin-options='{ "placeholder": "Select Ticket Type", "allowClear": true }'>
                                                            <option value="" > </option>
                                                            {% if ticketTypes %}
                                                                {% for ttype in ticketTypes %}
                                                                    <option value="{{ ttype.ttype_id }}" {% if report.ticket_type_id == ttype.ttype_id %}selected{% endif %}>{{ ttype.ttype_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Subtype 1:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="subtype1" id="subtype1" data-plugin-selectTwo class="form-control populate ticket_type ticket_type_parent placeholder" data-plugin-options='{ "placeholder": "Select an SubType1", "allowClear": true }'>
                                                        <option value=""> </option>
                                                        {% if TicketSubTypes1 %}
                                                            {% for ttype in TicketSubTypes1 %}
                                                                <option value="{{ ttype.ttype_id }}" {% if ttype.ttype_id == report.ticket_subtype1_id %}selected{% endif %}>{{ ttype.ttype_name }}</option>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Subtype 2:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="subtype2" id="subtype2" data-plugin-selectTwo class="form-control populate ticket_type subtype1 placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                        <option value=""> </option>
                                                        {% if TicketSubTypes2 %}
                                                            {% for ttype in TicketSubTypes2 %}
                                                                <option value="{{ ttype.ttype_id }}" {% if ttype.ttype_id == report.ticket_subtype2_id %}selected{% endif %}>{{ ttype.ttype_name }}</option>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Subtype 3:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="subtype3" id="subtype3" data-plugin-selectTwo class="form-control populate ticket_type subtype2 placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                        <option value=""> </option>
                                                        {% if TicketSubTypes3 %}
                                                            {% for ttype in TicketSubTypes3 %}
                                                                <option value="{{ ttype.ttype_id }}" {% if ttype.ttype_id == report.ticket_subtype3_id %}selected{% endif %}>{{ ttype.ttype_name }}</option>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Subtype 4:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="subtype4" id="subtype4" data-plugin-selectTwo class="form-control populate ticket_type subtype3 placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                        <option value=""> </option>
                                                        {% if TicketSubTypes4 %}
                                                            {% for ttype in TicketSubTypes4 %}
                                                                <option value="{{ ttype.ttype_id }}" {% if ttype.ttype_id == report.ticket_subtype4_id %}selected{% endif %}>{{ ttype.ttype_name }}</option>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Subject: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="subject" id="subject" value="{{ report.subject }}" class="form-control" title="Search Subject Keywords." placeholder="" />
                                                    </div>
                                                    <div class="col-md-6 col-sm-6">
                                                       <i class="text-primary">keyword search</i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Notes: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="ticket_note" id="ticket_note" value="{{ report.ticket_note  }}" class="form-control" title="Search Ticket Note Keywords." placeholder="" />
                                                    </div>
                                                    <div class="col-md-4 col-sm-5 align-text">
                                                       <i class="text-primary">keyword search</i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Solution: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="ticket_solution" id="ticket_solution" class="form-control" title="Search Ticket Solution Keywords." placeholder="" />
                                                    </div>
                                                    <div class="col-md-4 col-sm-5 align-text">
                                                       <i class="text-primary">keyword search</i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label text-bold">or</label>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Search All Three: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="all_three" id="all_three" value="{{ report.all_three }}" class="form-control" title="Search Ticket Subject or Note or Solution Keywords." placeholder="" />
                                                    </div>
                                                    <div class="col-md-4 col-sm-5 align-text">
                                                       <i class="text-primary">keyword search</i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Record Locator: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="record_locator" id="record_locator" value="{{ report.ticket_record_locator }}" class="form-control" title="Search Record Locator." placeholder="" />
                                                    </div>
                                                    <div class="col-md-6 col-sm-5 align-text">
                                                       <span class="text-primary">*</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Caller Name: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="caller_name" id="caller_name" value="{{ report.ticket_caller_name }}" class="form-control" title="Search Caller Name." placeholder="" />
                                                    </div>
                                                    <div class="col-md-6 col-sm-6">
                                                       <span class="text-primary">*</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Caller Phone: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="caller_phone" id="caller_phone" value="{{ report.ticket_caller_phone }}" class="form-control" title="Search Caller Phone." placeholder="" />
                                                    </div>
                                                    <div class="col-md-6 col-sm-6">
                                                       <span class="text-primary">*</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Caller Email: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="caller_email" id="caller_email" value="{{ report.ticket_caller_email }}" class="form-control" title="Search Caller Email." placeholder="" />
                                                    </div>
                                                    <div class="col-md-6 col-sm-5 align-text">
                                                       <span class="text-primary">*</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Passenger Name: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="passenger_name" id="passenger_name" value="{{ report.ticket_passenger_name }}" class="form-control" title="Search Passenger Name." placeholder="" />
                                                    </div>
                                                    <div class="col-md-6 col-sm-5 align-text">
                                                       <span class="text-primary">*</span>
                                                    </div>
                                                    <div class="col-md-8 col-sm-12">
                                                        <span class="text-info">	* wildcard searches allowed (ex: "ab*")</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Note Entered By:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="note_entered_by" id="note_entered_by" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                            <option value=""> </option>
                                                            {% if users %}
                                                                {% for user in users %}
                                                                    <option value="{{ user.id }}" {% if user.id == report.note_entered_by_id %}selected{% endif %}>{{ user.display_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Submitted By:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="submitted_by" id="submitted_by" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                            <option value=""> </option>
                                                            {% if users %}
                                                                {% for user in users %}
                                                                    <option value="{{ user.id }}" {% if user.id == report.submitted_by_id %}selected{% endif %}>{{ user.display_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Entered By:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="entered_by" id="entered_by" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                            <option value=""> </option>
                                                            {% if users %}
                                                                {% for user in users %}
                                                                    <option value="{{ user.id }}" {% if user.id == report.entered_by_id %}selected{% endif %}>{{ user.display_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Assigned To:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-6">
                                                        <select name="assigned_to" id="assigned_to" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                            <option value=""> </option>
                                                            {% if agents %}
                                                                {% for agent in agents %}
                                                                    <option value="{{ agent.id }}" {% if agent.id == report.ticket_assigned_to_id %}selected{% endif %}>{{ agent.display_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                    <div class="col-md-6 col-sm-6">
                                                         <div class="checkbox">
                                                             <label>
                                                                <input type="checkbox" name="ever_assign" value="1" {% if report.ever_assigned %}checked{% endif %}>
                                                                 <strong>Ever Assigned to </strong>
                                                             </label>
                                                         </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Assigned By:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="assigned_by" id="assigned_by" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                            <option value=""> </option>
                                                            {% if agent %}
                                                                {% for agent in agents %}
                                                                    <option value="{{ agent.id }}" {% if agent.id == report.assigned_by_id %}selected{% endif %}>{{ agent.display_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Next Action:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="next_action" id="next_action" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                            <option value=""> </option>
                                                            {% if users %}
                                                                {% for user in users %}
                                                                    <option value="{{ user.id }}" {% if user.id == report.next_action_id %}selected{% endif %}>{{ user.display_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                    <div class="col-md-6 col-sm-5 space_left_right_0">
                                                         <div class="checkbox">
                                                             <label>
                                                                <input type="checkbox" name="ever_next_action" value="1" {% if report.ever_next_action %}checked{% endif %}>
                                                                 <strong>Ever Next Actioned</strong>
                                                             </label>
                                                         </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Closed By:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="closed_by" id="closed_by" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                            <option value=""> </option>
                                                            {% if users %}
                                                                {% for user in users %}
                                                                    <option value="{{ user.id }}" {% if user.id == report.closed_by_id %}selected{% endif %}>{{ user.display_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            {% if user.user_type == '0' %}
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Organization: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                    <select name="org_id" id="org_id" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Organization", "allowClear": true }'>
                                                        <option value="" > </option>
                                                        {% if organizations %}
                                                            {% for org in organizations %}
                                                                <option value="{{ org.org_id }}"{% if org.org_id == report.org_id %}selected{% endif %}>{{ org.org_name }}</option>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </select>
                                                    </div>
                                                </div>
                                            </div>
                                            {% else %}
                                                <input type="hidden" id="org_id" name="org_id" value="{{ user.user_org_id }}">
                                            {% endif %}
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Account: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                    <select name="account_id" id="account_id" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Account", "allowClear": true }'>
                                                        <option value="" > </option>
                                                        {% if accounts %}
                                                            {% for account in accounts %}
                                                                <option value="{{ account.account_id }}"{% if account.account_id == report.account_id %}selected{% endif %}>{{ account.account_name }}</option>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Date Opened: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <input type="text" id="date_opened" name="date_opened" value="{{ report.date_opened }}" placeholder="Select Date Open" class="form-control" />
                                                    </div>
                                                    <div class="col-md-4 col-sm-4 align-text">
                                                        <span class="text-primary text-bold">mm/dd/yyyy</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Date Closed: </label>
                                                 <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <input type="text" id="date_closed" name="date_closed" value="{{ report.date_closed }}" placeholder="Select Date Close" class="form-control" />
                                                    </div>
                                                    <div class="col-md-4 col-sm-4 align-text">
                                                        <span class="text-primary text-bold">mm/dd/yyyy</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Total Time Open: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-3 col-sm-4">
                                                        <input type="text" id="total_time_open_val" name="total_time_open_val" value="{{ report.total_time_open_val }}" placeholder="" class="form-control" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');"/>
                                                    </div>
                                                    <div class="col-md-6 col-sm-8 space_left_right_0 align-text">
                                                        <div class="radio-primary form-check">
                                                            <i class="text-primary">days  </i>
                                                            <label for="task_type" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="total_time_open" name="total_time_open" {% if report.total_time_open == '0' %}checked{% endif %} value="0">
                                                                less than</label>
                                                            <label for="task_type" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="total_time_open" name="total_time_open" {% if report.total_time_open == '1' %}checked{% endif %} value="1" checked>
                                                                more than</label>
                                                            <label for="task_type" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="total_time_open" name="total_time_open" {% if report.total_time_open == '2' %}checked{% endif %} value="2">
                                                                equal</label>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Adj Time Open: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-3 col-sm-4">
                                                        <input type="text" id="adj_time_open_val" name="adj_time_open_val" placeholder="" class="form-control" value="{{ report.adj_time_open_val }}" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');"/>
                                                    </div>
                                                    <div class="col-md-6 col-sm-8 space_left_right_0 align-text">
                                                        <div class="radio-primary form-check">
                                                            <i class="text-primary">days  </i>
                                                            <label for="task_type" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="adj_time_open" name="adj_time_open" value="0">
                                                                less than</label>
                                                            <label for="task_type" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="adj_time_open" name="adj_time_open" value="1" checked>
                                                                more than</label>
                                                            <label for="task_type" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="adj_time_open" name="adj_time_open" value="2">
                                                                equal</label>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Labor Hours: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-3 col-sm-4">
                                                        <input type="text" name="labour_hours_val" class="form-control" value="{{ report.labour_hours_val }}" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');">
                                                    </div>
                                                    <div class="col-md-6 col-sm-8 space_left_right_0 align-text">
                                                        <div class="radio-primary form-check">
                                                            <i class="text-primary">hours  </i>
                                                            <label for="task_type" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="labour_hours" name="labour_hours" {% if report.labour_hours == '0' %}checked{% endif %} value="0">
                                                                less than</label>
                                                            <label for="task_type" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="labour_hours" name="labour_hours" {% if report.labour_hours == '1' %}checked{% endif %} value="1" checked>
                                                                more than</label>
                                                            <label for="labour_hours" class="form-check-label">
                                                                <input class="form-check-input radio-inline" type="radio" id="labour_hours" name="labour_hours" {% if report.labour_hours == '2' %}checked{% endif %} value="2">
                                                                equal</label>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label"></label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-8 col-sm-12">
                                                        <span class="text-primary">	**Searching on tasks requires a Search Output of 'Task List'</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Task Description: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="task_description" id="task_description" value="{{ report.task_description }}" class="form-control" title="Search Task Description Keywords." placeholder="" />
                                                    </div>
                                                    <div class="col-md-6 col-sm-5 align-text">
                                                       <i class="text-primary">keyword search</i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Task Assigned To:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="task_assigned_to" id="task_assigned_to" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select an Client", "allowClear": true }'>
                                                            <option value=""> </option>
                                                            {% if users %}
                                                                {% for user in users %}
                                                                    <option value="{{ user.id }}"{% if user.id == report.task_assigned_to_id %}selected{% endif %}>{{ user.display_name }}</option>
                                                                {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Task Date Completed:</label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <input type="text" id="task_completion_date" name="task_completion_date" value="{{ report.task_completion_date }}" placeholder="Select Date Date Completed" class="form-control" />
                                                    </div>
                                                    <div class="col-md-4 col-sm-5">
                                                        <span class="text-primary text-bold">mm/dd/yyyy</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label"></label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <span class="text-primary text-bold">Search Output Options</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Search Title: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                       <input type="text" name="search_title" id="search_title" value="{{ report.search_title }}" class="form-control" title="Search Task Description Keywords." placeholder="" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Output: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="output_view" id="output_view" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Sort Order", "allowClear": true }'>
                                                            <option selected="" value="BriefList" {% if report.output_view == 'BriefList' %}selected{% endif %}>Brief List</option>
                                                            <option value="BriefListwHours" {% if report.output_view == 'BriefListwHours' %}selected{% endif %}>Brief List w/Hours</option>
                                                            <option value="BriefListwLocations" {% if report.output_view == 'BriefListwLocations' %}selected{% endif %}>Brief List w/Client</option>
                                                            <option value="BriefListwOrganizations" {% if report.output_view == 'BriefListwOrganizations' %}selected{% endif %}>Brief List w/Organizations</option>
                                                            <option value="BriefListwRespTime" {% if report.output_view == 'BriefListwRespTime' %}selected{% endif %}>Brief List w/First Note Time</option>
                                                            <option value="BriefListwTasks" {% if report.output_view == 'BriefListwTasks' %}selected{% endif %}>Brief List w/Tasks</option>
                                                            <option value="BriefList2" {% if report.output_view == 'BriefList2' %}selected{% endif %}>Brief List Format 2</option>
                                                            <option value="CountOnly" {% if report.output_view == 'CountOnly' %}selected{% endif %}>Count Only</option>
                                                            <option value="DetailListWoNotes" {% if report.output_view == 'DetailListWoNotes' %}selected{% endif %}>Detail List w/o Notes</option>
                                                            <option value="DetailListWithNotes" {% if report.output_view == 'DetailListWithNotes' %}selected{% endif %}>Detail List with Notes</option>
                                                            <option value="OutputToExcel" {% if report.output_view == 'OutputToExcel' %}selected{% endif %}>Brief Output to Excel</option>
                                                            <option value="DetailOutputToExcel" {% if report.output_view == 'DetailOutputToExcel' %}selected{% endif %}>Detail Output to Excel</option>
                                                            <option value="RepAssignedReport" {% if report.output_view == 'RepAssignedReport' %}selected{% endif %}>Rep Assigned Report</option>
                                                            <option value="Statistics" {% if report.output_view == 'Statistics' %}selected{% endif %}>Statistics</option>
                                                            <option value="TaskList" {% if report.output_view == 'TaskList' %}selected{% endif %}>Task List</option>
                                                            <option value="TotalTimeTech" {% if report.output_view == 'TotalTimeTech' %}selected{% endif %}>Total Time by Assign, Org</option>
                                                            <option value="TotalTimeOrg" {% if report.output_view == 'TotalTimeOrg' %}selected{% endif %}>Total Time by Org, Assign</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-5 col-sm-5 space_left_right_0">
                                                        <div class="checkbox">
                                                             <label>
                                                                <input type="checkbox" name="show_criteria" value="1" {% if report.show_criteria == 1 %}checked{% endif %}>
                                                                 <strong>Include Criteria in Results</strong>
                                                             </label>
                                                         </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Sort Order 1: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="sort_column1" id="sort_column1" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Sort Order", "allowClear": true }'>
                                                            <option value="" > </option>
                                                            <option value="ticket_assign_to__display_name" {% if report.sort_column1 == 'ticket_assign_to__display_name' %}selected{% endif %} >Assigned To</option>
                                                            <option value="ticket_closed_at" {% if report.sort_column1 == 'ticket_closed_at' %}selected{% endif %} >Date Closed</option>
                                                            <option value="ticket_created_at" {% if report.sort_column1 == 'ticket_created_at' %}selected{% endif %} >Date Opened</option>
                                                            <option value="ticket_created_by__display_name" {% if report.sort_column1 == 'ticket_created_by__display_name' %}selected{% endif %} >Entered By</option>
                                                            <option value="ticket_id" {% if report.sort_column1 == 'ticket_id' %}selected{% endif %} >Ticket Nbr</option>
                                                            <option value="ticket_subtype1__ttype_name" {% if report.sort_column1 == 'ticket_subtype1__ttype_name' %}selected{% endif %} >Ticket Subtype</option>
                                                            <option value="ticket_type__ttype_name" {% if report.sort_column1 == 'ticket_type__ttype_name' %}selected{% endif %} >Ticket Type</option>
                                                            <option value="ticket_modified_at" {% if report.sort_column1 == 'ticket_modified_at' %}selected{% endif %} >Last Activity</option>
                                                            <option value="ticket_next_action__display_name" {% if report.sort_column1 == 'ticket_next_action__display_name' %}selected{% endif %} >Next Action By</option>
                                                            <option value="ticket_org__org_name" {% if report.sort_column1 == 'ticket_org__org_name' %}selected{% endif %} >Organization</option>
                                                            <option value="priority__p_display_order" {% if report.sort_column1 == 'priority__p_display_order' %}selected{% endif %} >Priority</option>
                                                            <option value="ticket_status" {% if report.sort_column1 == 'ticket_status' %}selected{% endif %} >Status</option>
                                                            <option value="ticket_caller__display_name" {% if report.sort_column1 == 'ticket_caller__display_name' %}selected{% endif %} >Submitted By</option>
                                                            <option value="ticket_created_at" {% if report.sort_column1 == 'ticket_created_at' %}selected{% endif %} >Time Open</option>
                                                            <option value="ticket_client__client_name" {% if report.sort_column1 == 'ticket_client__client_name' %}selected{% endif %} >Client</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-3 col-sm-5">
                                                        <select name="sort_order1" id="sort_order1" class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Sort Order", "allowClear": true }'>
                                                            <option value="0" {% if report.sort_order1 == 0 %}selected{% endif %}>Asc</option>
                                                            <option value="1" {% if report.sort_order1 == 1 %}selected{% endif %}>Desc</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Sort Order 2: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="sort_column2" id="sort_column2" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Sort Order", "allowClear": true }'>
                                                            <option value="" > </option>
                                                            <option value="ticket_assign_to__display_name" {% if report.sort_column2 == 'ticket_assign_to__display_name' %}selected{% endif %} >Assigned To</option>
                                                            <option value="ticket_closed_at" {% if report.sort_column2 == 'ticket_closed_at' %}selected{% endif %} >Date Closed</option>
                                                            <option value="ticket_created_at" {% if report.sort_column2 == 'ticket_created_at' %}selected{% endif %} >Date Opened</option>
                                                            <option value="ticket_created_by__display_name" {% if report.sort_column2 == 'ticket_created_by__display_name' %}selected{% endif %} >Entered By</option>
                                                            <option value="ticket_id" {% if report.sort_column2 == 'ticket_id' %}selected{% endif %} >Ticket Nbr</option>
                                                            <option value="ticket_subtype1__ttype_name" {% if report.sort_column2 == 'ticket_subtype1__ttype_name' %}selected{% endif %} >Ticket Subtype</option>
                                                            <option value="ticket_type__ttype_name" {% if report.sort_column2 == 'ticket_type__ttype_name' %}selected{% endif %} >Ticket Type</option>
                                                            <option value="ticket_modified_at" {% if report.sort_column2 == 'ticket_modified_at' %}selected{% endif %} >Last Activity</option>
                                                            <option value="ticket_next_action__display_name" {% if report.sort_column2 == 'ticket_next_action__display_name' %}selected{% endif %} >Next Action By</option>
                                                            <option value="ticket_org__org_name" {% if report.sort_column2 == 'ticket_org__org_name' %}selected{% endif %} >Organization</option>
                                                            <option value="priority__p_display_order" {% if report.sort_column2 == 'priority__p_display_order' %}selected{% endif %} >Priority</option>
                                                            <option value="ticket_status" {% if report.sort_column2 == 'ticket_status' %}selected{% endif %} >Status</option>
                                                            <option value="ticket_caller__display_name" {% if report.sort_column2 == 'ticket_caller__display_name' %}selected{% endif %} >Submitted By</option>
                                                            <option value="ticket_created_at" {% if report.sort_column2 == 'ticket_created_at' %}selected{% endif %} >Time Open</option>
                                                            <option value="ticket_client__client_name" {% if report.sort_column2 == 'ticket_client__client_name' %}selected{% endif %} >Client</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-3 col-sm-5">
                                                        <select name="sort_order2" id="sort_order2" class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Sort Order", "allowClear": true }'>
                                                            <option value="0" {% if report.sort_order2 == 0 %}selected{% endif %}>Asc</option>
                                                            <option value="1" {% if report.sort_order2 == 1 %}selected{% endif %}>Desc</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label">Sort Order 3: </label>
                                                <div class="col-md-9 col-sm-9">
                                                    <div class="col-md-6 col-sm-7">
                                                        <select name="sort_column3" id="sort_column3" data-plugin-selectTwo class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Sort Order", "allowClear": true }'>
                                                            <option value="" > </option>
                                                            <option value="ticket_assign_to__display_name" {% if report.sort_column3 == 'ticket_assign_to__display_name' %}selected{% endif %} >Assigned To</option>
                                                            <option value="ticket_closed_at" {% if report.sort_column3 == 'ticket_closed_at' %}selected{% endif %} >Date Closed</option>
                                                            <option value="ticket_created_at" {% if report.sort_column3 == 'ticket_created_at' %}selected{% endif %} >Date Opened</option>
                                                            <option value="ticket_created_by__display_name" {% if report.sort_column3 == 'ticket_created_by__display_name' %}selected{% endif %} >Entered By</option>
                                                            <option value="ticket_id" {% if report.sort_column3 == 'ticket_id' %}selected{% endif %} >Ticket Nbr</option>
                                                            <option value="ticket_subtype1__ttype_name" {% if report.sort_column3 == 'ticket_subtype1__ttype_name' %}selected{% endif %} >Ticket Subtype</option>
                                                            <option value="ticket_type__ttype_name" {% if report.sort_column3 == 'ticket_type__ttype_name' %}selected{% endif %} >Ticket Type</option>
                                                            <option value="ticket_modified_at" {% if report.sort_column3 == 'ticket_modified_at' %}selected{% endif %} >Last Activity</option>
                                                            <option value="ticket_next_action__display_name" {% if report.sort_column3 == 'ticket_next_action__display_name' %}selected{% endif %} >Next Action By</option>
                                                            <option value="ticket_org__org_name" {% if report.sort_column3 == 'ticket_org__org_name' %}selected{% endif %} >Organization</option>
                                                            <option value="priority__p_display_order" {% if report.sort_column3 == 'priority__p_display_order' %}selected{% endif %} >Priority</option>
                                                            <option value="ticket_status" {% if report.sort_column3 == 'ticket_status' %}selected{% endif %} >Status</option>
                                                            <option value="ticket_caller__display_name" {% if report.sort_column3 == 'ticket_caller__display_name' %}selected{% endif %} >Submitted By</option>
                                                            <option value="ticket_created_at" {% if report.sort_column2 == 'ticket_created_at' %}selected{% endif %} >Time Open</option>
                                                            <option value="ticket_client__client_name" {% if report.sort_column3 == 'ticket_client__client_name' %}selected{% endif %} >Client</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-3 col-sm-5">
                                                        <select name="sort_order3" id="sort_order3" class="form-control populate placeholder" data-plugin-options='{ "placeholder": "Select Sort Order", "allowClear": true }'>
                                                            <option value="0" {% if report.sort_order3 == 0 %}selected{% endif %}>Asc</option>
                                                            <option value="1" {% if report.sort_order3 == 1 %}selected{% endif %}>Desc</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-sm-3 control-label"></label>
                                                <div class="col-md-9 col-sm-9">
	                                                <div class="col-md-6 col-sm-12">
	                                                	<div class="bg-info" style="padding: 15px 15px">
		                                                    <div class="form-group">
		                                                        <label class="col-sm-8">
	                                                                <a href="" name="updateSearchTicket" id="updateSearchTicket" onclick="updateSearchTicket(event)"> Update Search</a>
	                                                            </label>
		                                                        <label class="col-sm-4 text-right">
	                                                                    Share   <input type="checkbox" name="share_checkbox" {% if report.is_share == 1 %}checked{% endif %}>
		                                                    </div>
		                                                    <div class="form-group">
		                                                        <label class="col-sm-8">
	                                                                <a class="mb-xs mt-xs mr-xs modal-sizes" href="#modalRetreiveSavedSearches">Retrieve Saved Searches </a>
	                                                            </label>
	                                                            <!-- Modal Form For Task Manager Start-->
	                                                                <div id="modalRetreiveSavedSearches" class="modal-block modal-block-lg mfp-hide">
	                                                                <section class="panel">
	                                                                    <header class="panel-heading">
	                                                                        <h2 class="panel-title">Select Search</h2>
	                                                                    </header>
	                                                                    <div class="panel-body">
	                                                                          <form id="modalForm" action="{% url 'updateTaskGroup' %}" method="post" class="form-horizontal">
	                                                                            <input type="hidden" name="changeTM" id="changeTM" value="0" />
	                                                                              <div class="table-responsive">
	                                                                              <table class="table table-bordered table-task-modal">
	                                                                                <thead>
	                                                                                    <tr>
	                                                                                        <th></th>
	                                                                                        <th>Saved Search</th>
	                                                                                        <th>Search ID</th>
	                                                                                        <th>Created By</th>
	                                                                                        <th>Last Modified</th>
	                                                                                    </tr>
	                                                                                </thead>
	                                                                                <tbody>
	                                                                                    {% if savedSearches %}
	                                                                                        {% for search in savedSearches %}
	                                                                                            <tr>
	                                                                                                <!-- <td><a href="" class="delete_record" data-id="{{ search.saved_search_id }}">delete</a></td> -->
	                                                                                                 <td><a href="#" data-href="{% url 'deleteSavedSearch' %}?save_id={{search.saved_search_id }}" class=""data-hover="Delete Ticket"  data-toggle="modal" data-target="#confirm-delete">delete</a>
	                                                                                                 <a href="#"  onclick="getCopyModal(event, {{search.saved_search_id}})">copy</a></td>
	                                                                                                 </td>
	                                                                                                <td><a href="{% url 'searchTicket' %}?reportNbr={{ search.saved_search_id }}" >{{ search.search_title }}{% if search.is_share == 1 %}*{% endif %}</a></td>
	                                                                                                <td><label href="" >{{ search.saved_search_id }}</label></td>
	                                                                                                <td><label href="" >{{ search.save_created_by.last_name }},{{ search.save_created_by.first_name }}</label></td>
	                                                                                                <td><label href="" >{{ search.save_modified_at|date:"m/d/Y"}} </label></td>
	                                                                                            </tr>
	                                                                                                 <!-- clone Modal Popup on Task Manager Task Delete -->
	                                                                                                    <div class="modal fade" id="confirm-Copy" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	                                                                                                        <div class="modal-dialog">
	                                                                                                            <div class="modal-content">
	                                                                                                                    
	                                                                                                                <div class="modal-header">
	                                                                                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	                                                                                                                    <h4 class="modal-title" id="myModalLabel">Copy Report Definition</h4>
	                                                                                                                </div>

	                                                                                                                <div class="modal-body">
	                                                                                                                    <p>Report will be copied and saved with a new report name.</p>
	                                                                                                                    <strong>Enter a name for the new report:</strong>
	                                                                                                                    <input type="text" name="copytitle" id="copytitle" class="form-control" placeholder="" />
	                                                                                                                    <input type="hidden" name="save_search_id" id="save_search_id" />
	                                                                                            
	                                                                                                                </div>

	                                                                                                                <div class="modal-footer">
	                                                                                                                    <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
	                                                                                                                    <a class="btn btn-primary"  onclick="copyrecord()">Ok</a>
	                                                                                                                </div>
	                                                                                                                
	                                                                                                            </div>
	                                                                                                        </div>
	                                                                                                    </div>
	                                                                                        {% endfor %}
	                                                                                    {% endif %}
	                                                                                </tbody>

	                                                                            </table>
	                                                                            <p>* Shared Search</p>
	                                                                            </div>
	                                                                        </form>
	                                                                    </div>
	                                                                    <footer class="panel-footer">
	                                                                        <div class="row">
	                                                                            <div class="col-md-12 text-right">
	                                                                                <button class="btn btn-primary modal-dismiss">Cancel</button>
	                                                                            </div>
	                                                                        </div>
	                                                                    </footer>
	                                                                                <!-- Delete Modal Popup on Task Manager Task Delete -->
	                                                                                    <div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	                                                                                        <div class="modal-dialog">
	                                                                                            <div class="modal-content">

	                                                                                                <div class="modal-header">
	                                                                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	                                                                                                    <h4 class="modal-title" id="myModalLabel">Confirm Delete</h4>
	                                                                                                </div>

	                                                                                                <div class="modal-body">
	                                                                                                    <p>You are about to delete a record, this procedure is irreversible.</p>
	                                                                                                    <strong>Do you want to proceed?</strong>
	                                                                                                </div>

	                                                                                                <div class="modal-footer">
	                                                                                                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	                                                                                                    <a class="btn btn-danger btn-ok">Delete</a>
	                                                                                                </div>
	                                                                                            </div>
	                                                                                        </div>
	                                                                                    </div>
	                                                                </section>
	                                                            </div>
	                                                            <!-- Modal Form For Task Manager End-->
		                                                        <label class="col-sm-3"></label>

		                                                    </div>
		                                                </div>
		                                            </div>
                                                </div>
                                            </div>
                                        </div>
                                        <footer class="panel-footer">
                                            <div class="row">
                                                <div class="col-sm-9">
                                                    <button class="btn btn-primary saveButton">Search</button>
                                                    <button type="reset" class="btn btn-default resetBtn">Reset</button>
                                                </div>
                                            </div>
                                        </footer>
                                    </section>
                                </form>
                            </div>
                        </div>
					<!-- end: page -->
				</section>
			</div>

    {% endblock %}

    {% block script %}
      <script>
        $('#confirm-delete').on('show.bs.modal', function(e) {
            $(this).find('.btn-ok').attr('href', $(e.relatedTarget).data('href'));
        });

        </script>
        <script>
            $(document).on('change','.ticket_type', function(){
              var tid = $(this).val();
              var ttype = $(this).attr('id');
              if (tid != ''){
                  $.ajax({
                    type: 'POST',
                    url: "{% url 'getTicketTypeChildById' %}",
                    data: {ttype_id: tid},
                    dataType: 'json',
                    beforeSend: function(jqXHR, settings) {
                        //Do something before send...
                    },
                    success: function(data, textStatus, jqXHR) {
                        if(data.response) {
                            result = jQuery.parseJSON(data['response'])
                            if(ttype == 'ticket_type_parent') {
                                $('#subtype1').html('<option value="" > </option>')
                                $('#subtype2').html('<option value="" > </option>')
                                $('#subtype3').html('<option value="" > </option>')
                                $('#subtype4').html('<option value="" > </option>')
                                $.each(result, function (index) {
                                    $('#subtype1').append('<option value="' + result[index].pk + '">' + result[index].fields.ttype_name + '</option>')
                                });
                            }else if(ttype == 'subtype1'){
                                $('#subtype2').html('<option value="" > </option>')
                                $('#subtype3').html('<option value="" > </option>')
                                $('#subtype4').html('<option value="" > </option>')
                                $.each(result, function (index) {
                                    $('#subtype2').append('<option value="' + result[index].pk + '">' + result[index].fields.ttype_name + '</option>')
                                });
                            }else if(ttype == 'subtype2'){
                                $('#subtype3').html('<option value="" > </option>')
                                $('#subtype4').html('<option value="" > </option>')
                                $.each(result, function (index) {
                                    $('#subtype3').append('<option value="' + result[index].pk + '">' + result[index].fields.ttype_name + '</option>')
                                });
                            }else if(ttype == 'subtype3'){
                                $('#subtype4').html('<option value="" > </option>')
                                $.each(result, function (index) {
                                    $('#subtype4').append('<option value="'+result[index].pk+'">'+result[index].fields.ttype_name+'</option>')
                                });
                            }
                        }
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        alert(textStatus + '. ' + errorThrown);
                    }
                  });
              }

            });

            function updateSearchTicket(event) {
                event.preventDefault();
                if($('#search_title').val() == ''){
                    alert('No value entered for Search Title!');
                }else{
                    $('#summary-form').attr('action', "{% url 'ticketUpdateSavedSearch' %}");
                    $('#summary-form').submit();
                }
            }
                
            function getCopyModal(e, id){
                $('#save_search_id').val(id);
                $('#confirm-Copy').modal('show');
            }

            function copyrecord(savesearchid,name){
                var name =$('#copytitle').val();
                if(name == ''){
                    alert('No value entered for Search Title!');
                }
                else{
                var savesearchid =$('#save_search_id').val();
                var name =$('#copytitle').val();
                console.log(savesearchid)
                console.log(name)
                $.ajax({
                    url: "{% url 'copySavedSearch' %}",
                    method: "POST",
                    data: {save_search_id: savesearchid, copytitle: name},
                    success: function (data) {
                        console.log(data)
                    }
                });
              window.location.reload(true);
            }} 
        </script>
        <script type="text/javascript">
            $(function() {

                var start = moment().subtract(365, 'days');
                var end = moment();

                function cb_open(start, end) {
                    $('#date_opened').val(start.format('MM/DD/YYYY') + ' - ' + end.format('MM/DD/YYYY'));
                }

                $('#date_opened').daterangepicker({
                    startDate: start,
                    endDate: end,
                    autoUpdateInput: false,
                    locale: {
                      cancelLabel: 'Clear'
                    },
                    ranges: {
                       'Today': [moment(), moment()],
                       'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                       'This Week': [moment().startOf('week'), moment().endOf('week')],
                       'Last Week': [moment().subtract(1, 'week').startOf('week'), moment().subtract(1, 'week').endOf('week')],
                       'This Month': [moment().startOf('month'), moment().endOf('month')],
                       'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
                       'This Year': [moment().startOf('year'), moment().endOf('year')],
                       'Last Year': [moment().subtract(1, 'year').startOf('year'), moment().subtract(1, 'year').endOf('year')]
                    }
                }, cb_open);
                {#cb_open(start, end);#}
                {#$('#date_opened').data('daterangepicker').setStartDate('03/01/2014');#}
                {#$('#date_opened').data('daterangepicker').setEndDate('03/31/2014');#}
                {#$('#date_opened').val({{ report.date_opened }});#}

                $('#date_opened').on('cancel.daterangepicker', function(ev, picker) {
                  $(this).val('');
                });

                function cb_close(start, end) {
                    $('#date_closed').val(start.format('MM/DD/YYYY') + ' - ' + end.format('MM/DD/YYYY'));
                }

                $('#date_closed').daterangepicker({
                    startDate: start,
                    endDate: end,
                    autoUpdateInput: false,
                    locale: {
                      cancelLabel: 'Clear'
                    },
                    ranges: {
                       'Today': [moment(), moment()],
                       'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                       'This Week': [moment().startOf('week'), moment().endOf('week')],
                       'Last Week': [moment().subtract(1, 'week').startOf('week'), moment().subtract(1, 'week').endOf('week')],
                       'This Month': [moment().startOf('month'), moment().endOf('month')],
                       'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
                       'This Year': [moment().startOf('year'), moment().endOf('year')],
                       'Last Year': [moment().subtract(1, 'year').startOf('year'), moment().subtract(1, 'year').endOf('year')]
                    }
                }, cb_close);
                {#cb_close(start, end);#}
                {#$('#date_closed').val('');#}

                $('#date_closed').on('cancel.daterangepicker', function(ev, picker) {
                  $(this).val('');
                });

                function cb_task(start, end) {
                    $('#task_completion_date').val(start.format('MM/DD/YYYY') + ' - ' + end.format('MM/DD/YYYY'));
                }

                $('#task_completion_date').daterangepicker({
                    startDate: start,
                    endDate: end,
                    autoUpdateInput: false,
                    locale: {
                      cancelLabel: 'Clear'
                    },
                    ranges: {
                       'Today': [moment(), moment()],
                       'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                       'This Week': [moment().startOf('week'), moment().endOf('week')],
                       'Last Week': [moment().subtract(1, 'week').startOf('week'), moment().subtract(1, 'week').endOf('week')],
                       'This Month': [moment().startOf('month'), moment().endOf('month')],
                       'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
                       'This Year': [moment().startOf('year'), moment().endOf('year')],
                       'Last Year': [moment().subtract(1, 'year').startOf('year'), moment().subtract(1, 'year').endOf('year')]
                    }
                }, cb_task);
                {#cb_task(start, end);#}
                {#$('#task_completion_date').val('');#}

                $('#task_completion_date').on('cancel.daterangepicker', function(ev, picker) {
                  $(this).val('');
                });

                                var output_view = $("#output_view").val();
                if(output_view == 'CountOnly' || output_view == 'Statistics' || output_view == 'TotalTimeTech' || output_view == 'TotalTimeOrg')
                {
                    $('#sort_column1').attr('disabled', true);
                    $('#sort_order1').attr('disabled', true);
                    $('#sort_column2').attr('disabled', true);
                    $('#sort_order2').attr('disabled', true);
                    $('#sort_column3').attr('disabled', true);
                    $('#sort_order3').attr('disabled', true);
                }
                else
                {
                    $('#sort_column1').attr('disabled', false);
                    $('#sort_order1').attr('disabled', false);
                    $('#sort_column2').attr('disabled', false);
                    $('#sort_order2').attr('disabled', false);
                    $('#sort_column3').attr('disabled', false);
                    $('#sort_order3').attr('disabled', false);
                }

            });

            {% comment %} $(document).on('click', '.delete_record', function(e) {
                // cancel submit
                e.preventDefault();
                r_id = ($(this).attr('data-id'));
                current_id = $('#savedSearchId').val();
                $(this).closest('tr').remove();
                if (r_id != ''){
                  $.ajax({
                        type: 'POST',
                        url: '/deleteSavedSearch/',
                        data: {save_id: r_id},
                        dataType: 'json',
                        beforeSend: function(jqXHR, settings) {
                            //Do something before send...
                        },
                        success: function(data, textStatus, jqXHR) {
                            if(data['response'] == 'Success') {
                                if(r_id == current_id){
                                    setTimeout(function(){
                                        window.location.href = "{% url 'searchTicket' %}";
                                    }, 1000);
                                }

                            }
                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            alert(textStatus + '. ' + errorThrown);
                        }
                      });
                }
            }) {% endcomment %}

        $(document).on('change', '#output_view', function () {
            var output_view = $(this).val();
            if(output_view == 'CountOnly' || output_view == 'Statistics' || output_view == 'TotalTimeTech' || output_view == 'TotalTimeOrg')
            {
                $('#sort_column1').attr('disabled', true);
                $('#sort_order1').attr('disabled', true);
                $('#sort_column2').attr('disabled', true);
                $('#sort_order2').attr('disabled', true);
                $('#sort_column3').attr('disabled', true);
                $('#sort_order3').attr('disabled', true);
            }
            else
            {
                $('#sort_column1').attr('disabled', false);
                $('#sort_order1').attr('disabled', false);
                $('#sort_column2').attr('disabled', false);
                $('#sort_order2').attr('disabled', false);
                $('#sort_column3').attr('disabled', false);
                $('#sort_order3').attr('disabled', false);
            }
        });
        $('.resetBtn').on('click', function(e){
            {% if report.ticket_status == 0 %}
                $("#ticket_status").select2("val", 0);
            {% else %}
                $("#ticket_status").select2("val", 1);
            {% endif %}
            {% if report.ticket_sub_status_id%}
                $("#ticket_sub_status").select2("val",{{report.ticket_sub_status_id }});
            {% else %}
                $("#ticket_sub_status").select2("val","");
            {% endif %}
            {% if report.priority_id %}
                $("#priority").select2("val",{{ report.priority_id }} );
            {% else %}
                $("#priority").select2("val", "");
            {% endif %}
            {% if report.ticket_type_id %}
                $("#ticket_type_parent").select2("val", {{ report.ticket_type_id }});
            {% else %}
                $("#ticket_type_parent").select2("val", "");
            {% endif %}
            {% if report.ticket_subtype1_id %}
                $("#subtype1").select2("val", {{ report.ticket_subtype1_id }});
            {% else %}
            {% endif %}
            {% if  report.ticket_subtype2_id %}
                $("#subtype2").select2("val", {{ report.ticket_subtype2_id }});
            {% else %}
                 $("#subtype2").select2("val", "");
            {% endif %}
            {% if report.ticket_subtype3_id  %}
                $("#subtype3").select2("val", {{ report.ticket_subtype3_id }});
            {% else %}
                 $("#subtype3").select2("val", "");
            {% endif %}
            {% if report.ticket_subtype4_id %}
                $("#subtype4").select2("val", {{ report.ticket_subtype4_id }});
            {% else %}
                $("#subtype4").select2("val", "");
            {% endif %}
            {% if report.subject %}
                $("#subject").val({{ report.subject }});
            {% else %}
                 $("#subject").val("");
            {% endif %}
            {% if report.ticket_note  %}
                $("#ticket_note").val({{ report.ticket_note }});
            {% else %}
                $("#ticket_note").val("");
            {% endif %}
            {% if report.all_three %}
                $("#all_three").val({{ report.all_three }});
            {% else %}
                $("#all_three").val("");
            {% endif %}
            {% if report.ticket_record_locator %}
                $("#record_locator").val({report.ticket_record_locator}});
            {% else %}
                $("#record_locator").val("");
            {% endif %}
            {% if report.ticket_caller_name %}
               $("#caller_name").val({{ report.ticket_caller_name }});
            {% else %}
                $("#caller_name").val("");
            {% endif %}
            {% if report.ticket_caller_phone %}
                $("#caller_phone").val({{ report.ticket_caller_phone }});
            {% else %}
                 $("#caller_phone").val("");
            {% endif %}
            {% if report.ticket_caller_email %}
               $("#caller_email").val({{ report.ticket_caller_email }});
            {% else %}
                 $("#caller_email").val("");
            {% endif %}
            {% if report.ticket_passenger_name %}
                $("#passenger_name").val({{ report.ticket_passenger_name }});
            {% else %}
                $("#passenger_name").val("");
            {% endif %}
            {% if report.note_entered_by_id %}
                $("#note_entered_by").select2("val", {{ report.note_entered_by_id }});
            {% else %}
                $("#note_entered_by").select2("val", "");
            {% endif %}
            {% if  report.submitted_by_id %}
                $("#submitted_by").select2("val", {{ report.submitted_by_id }});
            {% else %}
                $("#submitted_by").select2("val", "");
            {% endif %}
            {% if  report.entered_by_id %}
                $("#entered_by").select2("val", {{ report.entered_by_id }});
            {% else %}
                $("#entered_by").select2("val", "");
            {% endif %}
            {% if  report.ticket_assigned_to_id %}
                $("#assigned_to").select2("val", {{ report.ticket_assigned_to_id }});
            {% else %}
                  $("#assigned_to").select2("val", "");
            {% endif %}
            {% if report.assigned_by_id %}
                $("#assigned_by").select2("val", {{ report.assigned_by_id }});
            {% else %}
                 $("#assigned_by").select2("val", "");
            {% endif %}
            {% if  report.next_action_id %}
                $("#next_action").select2("val", {{ report.next_action_id }});
            {% else %}
                 $("#next_action").select2("val", "");
            {% endif %}
            {% if report.closed_by_id %}
                $("#closed_by").select2("val", {{ report.closed_by_id }});
            {% else %}
                 $("#closed_by").select2("val", "");
            {% endif %}
            {% if report.org_id  %}
               $("#org_id").select2("val", {{ report.org_id }});
            {% else %}
                 $("#org_id").select2("val", "");
            {% endif %}
            {% if report.client_id %}
                $("#client_id").select2("val", {{ report.client_id }});
            {% else %}
                $("#client_id").select2("val", "");
            {% endif %}
            {% if report.task_assigned_to_id %}
               $("#task_assigned_to").select2("val",{{ report.task_assigned_to_id }});
            {% else %}
                 $("#task_assigned_to").select2("val", "");
            {% endif %}

            });

        </script>
    {% endblock %}


